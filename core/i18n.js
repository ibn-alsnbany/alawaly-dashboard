const translations = {
    ar: {
        title: "العوالي 2030",
        dashboard: "لوحة التحكم",
        finance: "الإدارة المالية",
        marketing: "إدارة التسويق",
        sales: "إدارة المبيعات",
        hr: "إدارة الموارد البشرية",
        analytics: "أداة التحليل",
        system: "إدارة النظام",
        users: "إدارة المستخدمين",
        settings: "الإعدادات",
        welcomeBack: "مرحباً بك مجدداً، محمد علي",
        dashboardSubtitle: "إليك ما يحدث في مشروعك اليوم.",
        usersSubtitle: "إدارة أعضاء الفريق والصلاحيات",
        welcome: "مرحباً بك في مستقبل العوالي",
        langToggle: "English",
        search: "ابحث عن أي شيء...",
        userName: "محمد علي",
        userRole: "مدير النظام",
        themeToggle: "تغيير المظهر",
        totalSales: "إجمالي المبيعات",
        newUsers: "المستخدمين الجدد",
        expenses: "المصروفات",
        conversionRate: "معدل التحويل",
        recentActivity: "آخر الأنشطة",
        sar: `<svg class="w-4 h-4 inline-block align-baseline mb-0.5" viewBox="0 0 320 350" fill="currentColor"><path d="M110 20 L145 0 L145 270 L110 290 Z M220 45 L255 25 L255 280 L220 300 Z M30 190 L300 100 L315 145 L45 235 Z M15 260 L245 185 L260 230 L30 305 Z M195 305 L300 270 L310 305 L205 340 Z"/></svg>`,
        newUserAdded: "تم إضافة مستخدم جديد",
        saleCompleted: "عملية بيع مكتملة",
        systemUpdated: "تحديث النظام",
        "5minsAgo": "منذ 5 دقائق",
        "15minsAgo": "منذ 15 دقيقة",
        "1hourAgo": "منذ ساعة",
        revenue: "الإيرادات",
        profit: "الأرباح",
        invoices: "الفواتير",
        payments: "المدفوعات",
        campaigns: "الحملات",
        leads: "العملاء المحتملون",
        clicks: "النقرات",
        roi: "العائد",
        orders: "الطلبات",
        customers: "العملاء",
        averageOrder: "متوسط الطلبات",
        employees: "الموظفون",
        attendance: "الحضور",
        leaves: "الإجازات",
        salaries: "الرواتب",
        visitors: "الزوار",
        bounceRate: "معدل الارتداد",
        sessionDuration: "مدة الجلسة",
        security: "الأمان",
        backup: "النسخ الاحتياطي",
        profile: "الملف الشخصي",
        appearance: "المظهر",
        newInvoice: "فاتورة جديدة",
        id: "رقم",
        customer: "العميل",
        amount: "المبلغ",
        status: "الحالة",
        performance: "الأداء",
        channels: "القنوات",
        trafficAnalysis: "تحليل الزيارات",
        recentOrders: "آخر الطلبات",
        employeeList: "قائمة الموظفين",
        systemStatus: "حالة النظام",
        recentUpdates: "آخر التحديثات",
        searchUsers: "البحث عن مستخدم",
        addUser: "إضافة مستخدم",
        fullName: "الاسم الكامل",
        saveChanges: "حفظ التغييرات",
        // New Toggle Keys
        langNameLarge: "English",
        langNameSmall: "EN",
        themeDay: "نهار",
        themeNight: "ليلي",
        // Dashboard specific
        viewMore: "المزيد",
        priceUpdate: "تحديث الأسعار المالية",
        twoDaysAgo: "منذ يومين",
        statistics: "الإحصائيات",
        sales: "المبيعات",
        systemPerformance: "حالة النظام والأداء",
        processingSpeed: "سرعة المعالجة",
        memoryUsage: "استخدام الذاكرة",
        connectionStrength: "قوة الاتصال",
        monthlyReport: "تقرير شهري",
        securitySettings: "إعدادات الأمان",
        // Analytics specific
        analyticsSubtitle: "قراءة وتحليل البيانات في الوقت الحقيقي.",
        avgClickRate: "متوسط النقر",
        weeklyGrowthAnalysis: "تحليل النمو الأسبوعي",
        comparePerformance: "مقارنة أداء الزيارات والتحويلات",
        current: "الحالي",
        previous: "السابق",
        teamPerformance: "أداء الفريق",
        fullStaffReport: "تقرير الموظفين الكامل"
    },
    en: {
        title: "Al-Awali 2030",
        dashboard: "Dashboard",
        finance: "Financial Management",
        marketing: "Marketing Management",
        sales: "Sales Management",
        hr: "HR Management",
        analytics: "Analytics Tool",
        system: "System Management",
        users: "User Management",
        settings: "Settings",
        welcomeBack: "Welcome back, Mohammed Ali",
        dashboardSubtitle: "Here's what's happening today.",
        usersSubtitle: "Manage your team members and roles.",
        welcome: "Welcome to Al-Awali",
        langToggle: "العربية",
        search: "Search everything...",
        userName: "Mohammed Ali",
        userRole: "System Admin",
        themeToggle: "Toggle Theme",
        totalSales: "Total Sales",
        newUsers: "New Users",
        expenses: "Expenses",
        conversionRate: "Conversion Rate",
        recentActivity: "Recent Activity",
        sar: `<svg class="w-4 h-4 inline-block align-baseline mb-0.5" viewBox="0 0 320 350" fill="currentColor"><path d="M110 20 L145 0 L145 270 L110 290 Z M220 45 L255 25 L255 280 L220 300 Z M30 190 L300 100 L315 145 L45 235 Z M15 260 L245 185 L260 230 L30 305 Z M195 305 L300 270 L310 305 L205 340 Z"/></svg>`,
        newUserAdded: "New user joined",
        saleCompleted: "Sale completed",
        systemUpdated: "System updated",
        "5minsAgo": "5 mins ago",
        "15minsAgo": "15 mins ago",
        "1hourAgo": "1 hour ago",
        revenue: "Revenue",
        profit: "Profit",
        invoices: "Invoices",
        payments: "Payments",
        campaigns: "Campaigns",
        leads: "Leads",
        clicks: "Clicks",
        roi: "ROI",
        orders: "Orders",
        customers: "Customers",
        averageOrder: "Avg Order",
        employees: "Employees",
        attendance: "Attendance",
        leaves: "Leaves",
        salaries: "Salaries",
        visitors: "Visitors",
        bounceRate: "Bounce Rate",
        sessionDuration: "Session Duration",
        security: "Security",
        backup: "Backup",
        profile: "Profile",
        appearance: "Appearance",
        newInvoice: "New Invoice",
        id: "ID",
        customer: "Customer",
        amount: "Amount",
        status: "Status",
        performance: "Performance",
        channels: "Channels",
        trafficAnalysis: "Traffic Analysis",
        recentOrders: "Recent Orders",
        employeeList: "Employee List",
        systemStatus: "System Status",
        recentUpdates: "Recent Updates",
        searchUsers: "Search Users",
        addUser: "Add User",
        fullName: "Full Name",
        saveChanges: "Save Changes",
        // New Toggle Keys
        langNameLarge: "العربية",
        langNameSmall: "عر",
        themeDay: "Day",
        themeNight: "Night",
        // Dashboard specific
        viewMore: "View More",
        priceUpdate: "Price update",
        twoDaysAgo: "2 days ago",
        statistics: "Statistics",
        sales: "Sales",
        systemPerformance: "System Performance",
        processingSpeed: "Processing Speed",
        memoryUsage: "Memory Usage",
        connectionStrength: "Connection Strength",
        monthlyReport: "Monthly Report",
        securitySettings: "Security Settings",
        // Analytics specific
        analyticsSubtitle: "Real-time data reading and analysis.",
        avgClickRate: "Avg Click Rate",
        weeklyGrowthAnalysis: "Weekly Growth Analysis",
        comparePerformance: "Compare visits and conversions performance",
        current: "Current",
        previous: "Previous",
        teamPerformance: "Team Performance",
        fullStaffReport: "Full Staff Report"
    }
};

class I18n {
    constructor() {
        this.lang = localStorage.getItem('lang') || 'ar';
        this.apply();
    }

    toggle() {
        this.lang = this.lang === 'ar' ? 'en' : 'ar';
        localStorage.setItem('lang', this.lang);
        this.apply();
        window.dispatchEvent(new CustomEvent('langChanged', { detail: this.lang }));
    }

    apply() {
        document.documentElement.lang = this.lang;
        document.documentElement.dir = this.lang === 'ar' ? 'rtl' : 'ltr';
        this.translatePage();
    }

    translatePage() {
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[this.lang][key]) {
                el.innerHTML = translations[this.lang][key];
            }
        });

        const placeholders = document.querySelectorAll('[data-i18n-placeholder]');
        placeholders.forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            if (translations[this.lang][key]) {
                el.placeholder = translations[this.lang][key];
            }
        });
    }

    t(key) {
        return translations[this.lang][key] || key;
    }
}

export const i18n = new I18n();
